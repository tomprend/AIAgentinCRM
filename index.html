<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM System - Case Details</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the draggable AI agent */
        #ai-agent {
            position: absolute; /* Allows precise positioning */
            cursor: grab; /* Indicates it's draggable */
            user-select: none; /* Prevent text selection during drag */
            z-index: 1000; /* Ensure it floats above other content */
            touch-action: none; /* Prevents default touch actions like scrolling/zooming */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center; /* Center the text inside the agent */
            /* Initial size and background from the request */
            width: 300px; /* Increased width for better text visibility */
            height: 100px; /* Adjusted height */
            background-color: #f97316; /* Tailwind orange-500 */
            color: white;
            padding: 1rem;
            border-radius: 0.75rem; /* Tailwind rounded-xl */
        }

        #ai-agent.dragging {
            cursor: grabbing; /* Cursor when actively dragging */
        }
    </style>
</head>
<body class="font-sans bg-gray-100 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-blue-800 text-white p-4 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                </svg>
                <h1 class="text-2xl font-bold">CRM System</h1>
            </div>
            <!-- Header Widget placeholder (as seen in image) -->
            <div class="text-sm text-blue-200">Header Widget</div>
            <div class="flex items-center space-x-2">
                <span class="text-sm">John Doe</span>
                <div class="h-8 w-8 rounded-full bg-white flex items-center justify-center text-blue-800 font-bold">U</div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col md:flex-row container mx-auto py-6 px-4">

        <!-- Sidebar -->
        <aside class="md:w-1/5 bg-white p-6 rounded-lg shadow-md mb-6 md:mr-6 md:mb-0">
            <nav class="space-y-2">
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2 2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    Dashboard
                </a>
                <a href="#" class="flex items-center p-3 rounded-md bg-blue-500 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h2a2 2 0 002-2V4a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h2m0 0l-2 2m2-2l2 2m0 0l-2 2" />
                    </svg>
                    Contacts
                </a>
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m0 0h-2m2 0v-2m2 2v-5m10 5v-2m2 2v-5m0 0h-2M15 15a2 2 0 01-2 2H9a2 2 0 01-2-2m4 0V9m0 0l3 3m-3-3l-3 3" />
                    </svg>
                    Companies
                </a>
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V9m0 3v2m0 3v2M4 16h3M20 16h3M6.5 7.5l-1.5-1.5M17.5 7.5l1.5-1.5M4 10h3M20 10h3M6.5 16.5l-1.5 1.5M17.5 16.5l1.5 1.5" />
                    </svg>
                    Deals
                </a>
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                    </svg>
                    Tasks
                </a>
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 2v-6m2 2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-5l-4-4v12" />
                    </svg>
                    Reports
                </a>
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Settings
                </a>
                <a href="#" class="flex items-center p-3 rounded-md text-gray-700 hover:bg-blue-100 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    Logout
                </a>
            </nav>
        </aside>

        <!-- Case Details Content -->
        <main class="flex-1">
            <div class="bg-white p-6 rounded-lg shadow-md mb-6 relative">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold text-gray-800">Case #98765: Order Delay for Widget X3</h2>
                    <div class="flex space-x-2">
                        <button class="flex items-center px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Edit Case
                        </button>
                        <button class="flex items-center px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete Case
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Case Information -->
                    <div class="bg-blue-50 p-6 rounded-lg shadow-sm border border-blue-200">
                        <h3 class="text-lg font-medium text-blue-800 mb-4 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            Case Information
                        </h3>
                        <div class="space-y-2 text-gray-700">
                            <p><span class="font-semibold">Status:</span> <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">Pending</span></p>
                            <p><span class="font-semibold">Priority:</span> <span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs">High</span></p>
                            <p><span class="font-semibold">Created Date:</span> 2025-06-20</p>
                            <p><span class="font-semibold">Last Updated:</span> 2025-06-24</p>
                            <p><span class="font-semibold">Assigned To:</span> Agent Jane Doe</p>
                            <div class="mt-4">
                                <p class="font-semibold mb-1">Case Description:</p>
                                <p class="text-sm">Customer reported an unexpected delay in the shipment of their order #ORD7890 for 10 units of Widget X3. The original delivery estimate was June 23rd, but the tracking shows no update since June 21st.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Customer Information -->
                    <div class="bg-green-50 p-6 rounded-lg shadow-sm border border-green-200">
                        <h3 class="text-lg font-medium text-green-800 mb-4 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h2a2 2 0 002-2V4a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h2m0 0l-2 2m2-2l2 2m0 0l-2 2" />
                            </svg>
                            Customer Information
                        </h3>
                        <div class="space-y-2 text-gray-700">
                            <p><span class="font-semibold">Name:</span> Alice Wonderland</p>
                            <p><span class="font-semibold">Company:</span> Curious Innovations Inc.</p>
                            <p><span class="font-semibold">Email:</span> <a href="mailto:alice.w@example.com" class="text-blue-600 hover:underline">alice.w@example.com</a></p>
                            <p><span class="font-semibold">Phone:</span> +1 (555) 123-4567</p>
                        </div>
                        <button class="mt-6 w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM12 10V4" />
                            </svg>
                            View Contact Profile
                        </button>
                    </div>
                </div>

                <!-- Recent Interactions -->
                <div class="bg-white p-6 rounded-lg shadow-md mt-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-4 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h.01M7 11h.01M11 15h.01M15 15h.01M17 21v-2a2 2 0 00-2-2H9a2 2 0 00-2 2v2m11-5H6a2 2 0 00-2 2v2a2 2 0 002 2h12a2 2 0 002-2v-2a2 2 0 00-2-2z" />
                        </svg>
                        Recent Interactions
                    </h3>
                    <ul class="divide-y divide-gray-200">
                        <li class="py-3">
                            <p class="text-sm text-gray-500">2025-06-24 10:30 AM - Agent Jane Doe</p>
                            <p class="text-gray-700">Called customer to acknowledge receipt of case. Informed them we are investigating the shipping delay with logistics team.</p>
                        </li>
                        <li class="py-3">
                            <p class="text-sm text-gray-500">2025-06-23 03:15 PM - System</p>
                            <p class="text-gray-700">Email sent: "Case #98765 received confirmation."</p>
                        </li>
                        <li class="py-3">
                            <p class="text-sm text-gray-500">2025-06-20 09:00 AM - Customer Portal</p>
                            <p class="text-gray-700">New case submitted via customer portal regarding order #ORD7890 delay.</p>
                        </li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- AI Agent -->
    <div id="ai-agent" class="shadow-lg hover:shadow-xl transition-shadow duration-300 transform hover:scale-105"
         style="top: 20px; left: calc(100vw - 320px);">
         <!-- Initial position set to be 20px from the top and roughly 20px from the right, but using 'left' for easier calculation -->
        <p class="text-base font-semibold">Hey! I've just created that case for you that the customer needed</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const aiAgent = document.getElementById('ai-agent');
            let isDragging = false;
            let xOffset; // Renamed from initialX to better reflect its purpose
            let yOffset; // Renamed from initialY to better reflect its purpose

            // Function to handle start of drag for both mouse and touch
            function dragStart(e) {
                isDragging = true;
                aiAgent.classList.add('dragging');

                const clientX = e.type === "touchstart" ? e.touches[0].clientX : e.clientX;
                const clientY = e.type === "touchstart" ? e.touches[0].clientY : e.clientY;

                // Calculate the offset of the mouse/touch position from the element's top-left corner
                xOffset = clientX - aiAgent.getBoundingClientRect().left;
                yOffset = clientY - aiAgent.getBoundingClientRect().top;

                // Stop text selection or other default behaviors
                e.preventDefault();
            }

            // Function to handle drag for both mouse and touch
            function drag(e) {
                if (isDragging) {
                    const clientX = e.type === "touchmove" ? e.touches[0].clientX : e.clientX;
                    const clientY = e.type === "touchmove" ? e.touches[0].clientY : e.clientY;

                    // Calculate the new position of the element
                    // The element's new top-left is current mouse/touch position minus the offset calculated at dragStart
                    const newLeft = clientX - xOffset;
                    const newTop = clientY - yOffset;

                    aiAgent.style.left = `${newLeft}px`;
                    aiAgent.style.top = `${newTop}px`;

                    // Stop text selection or other default behaviors
                    e.preventDefault();
                }
            }

            // Function to handle end of drag for both mouse and touch
            function dragEnd(e) {
                isDragging = false;
                aiAgent.classList.remove('dragging');
            }

            // Mouse events
            aiAgent.addEventListener('mousedown', dragStart);
            document.addEventListener('mouseup', dragEnd);
            document.addEventListener('mousemove', drag);

            // Touch events for mobile responsiveness
            aiAgent.addEventListener('touchstart', dragStart);
            document.addEventListener('touchend', dragEnd);
            document.addEventListener('touchmove', drag);

            // Set the initial 'left' position dynamically based on viewport width
            // This ensures it starts correctly and doesn't conflict with 'right' after being dragged
            // Initial position is 20px from top and about 20px from right edge
            aiAgent.style.left = `${window.innerWidth - aiAgent.offsetWidth - 20}px`;
        });
    </script>
</body>
</html>
